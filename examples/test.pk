extern puts(s string)
extern puti(i int)

proc new_int_array(length int, default int) ^int do
    memory x ^int length 4 *
    i: int = 0
    while i < length do
        @x 4 i * + = default
        i = i 1 +
    end
    return x
end

proc access_arr(arr ^int, location int) int do
    return arr location 4 * + !
end

pub proc main() do
    x: ^int = new_int_array(10, 5)
    puti(access_arr(x, 1))
end
